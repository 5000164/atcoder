package agc033

import java.io.ByteArrayInputStream

import org.scalatest.FeatureSpec

import scala.io.Source

class agc033_aSpec extends FeatureSpec {
  feature("https://atcoder.jp/contests/agc033/tasks/agc033_a") {
    scenario("入力例 1") {
      val input =
        """3 3
          |...
          |.#.
          |...
          |""".stripMargin
      val output =
        """2
          |""".stripMargin
      System.setIn(new ByteArrayInputStream(input.getBytes))
      val outCapture = new java.io.ByteArrayOutputStream
      Console.withOut(outCapture) {
        agc033_a.main(Array())
      }
      assert(outCapture.toString === output)
    }

    scenario("入力例 2") {
      val input =
        """6 6
          |..#..#
          |......
          |#..#..
          |......
          |.#....
          |....#.
          |""".stripMargin
      val output =
        """3
          |""".stripMargin
      System.setIn(new ByteArrayInputStream(input.getBytes))
      val outCapture = new java.io.ByteArrayOutputStream
      Console.withOut(outCapture) {
        agc033_a.main(Array())
      }
      assert(outCapture.toString === output)
    }

    scenario("大きい表") {
      val input =
        """100 100
          |#...................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |....................................................................................................
          |""".stripMargin
      val output =
        """198
          |""".stripMargin
      System.setIn(new ByteArrayInputStream(input.getBytes))
      val outCapture = new java.io.ByteArrayOutputStream
      Console.withOut(outCapture) {
        agc033_a.main(Array())
      }
      assert(outCapture.toString === output)
    }

    scenario("最大の大きい表") {
      val source = Source.fromFile(s"${new java.io.File(".").getCanonicalPath}/src/test/resources/agc033/table.txt")
      val input =
        s"""1000 1000
           |${source.getLines.mkString("\n")}
           |""".stripMargin
      source.close
      val output =
        """1998
          |""".stripMargin
      System.setIn(new ByteArrayInputStream(input.getBytes))
      val outCapture = new java.io.ByteArrayOutputStream
      Console.withOut(outCapture) {
        agc033_a.main(Array())
      }
      assert(outCapture.toString === output)
    }
  }
}
